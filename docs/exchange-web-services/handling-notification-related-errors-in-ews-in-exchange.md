---
title: Gestion des erreurs liées à la notification dans EWS dans Exchange
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
localization_priority: Normal
ms.assetid: 519e1e52-5f1f-4f06-931e-8c20a586a563
description: Découvrez comment gérer les erreurs liées à la notification dans les applications que vous développez à l’aide de l’API managée EWS ou d’EWS dans Exchange.
ms.openlocfilehash: 60edb1344e6b0499ef6d2ed2aefaebde723b42cc
ms.sourcegitcommit: 88ec988f2bb67c1866d06b361615f3674a24e795
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/03/2020
ms.locfileid: "44528313"
---
# <a name="handling-notification-related-errors-in-ews-in-exchange"></a>Gestion des erreurs liées à la notification dans EWS dans Exchange

Découvrez comment gérer les erreurs liées à la notification dans les applications que vous développez à l’aide de l’API managée EWS ou d’EWS dans Exchange.

Si votre application s’abonne à et reçoit des notifications, il se peut que vous deviez gérer les erreurs liées à la notification. Vous pouvez gérer ces erreurs en cours d'exécution, ou lorsque vous développez votre application EWS.

**Tableau 1. Erreurs liées à la notification et comment les gérer**

|Erreur|Cet événement se produit lorsque vous essayez de...|Traiter par...|
|:-----|:-----|:-----|
|**ErrorExceededConnectionCount** |Ouvrir une connexion pour obtenir des événements lorsque le compte a atteint sa limite de connexions de diffusion en continu ouverte. | <ul><li>Utilisation de l' [emprunt d’identité](https://technet.microsoft.com/library/dd776119%28v=exchg.150%29.aspx) pour [ouvrir les connexions](how-to-maintain-affinity-between-group-of-subscriptions-and-mailbox-server.md#bk_throttling).</li><li>Utilisation d’un nombre réduit de connexions pour obtenir des événements. Optimisez le nombre d’abonnements dans chaque connexion à [l’aide de l’affinité](how-to-maintain-affinity-between-group-of-subscriptions-and-mailbox-server.md) et en [plaçant un nombre maximal de 200 ID d’abonnement dans le même groupe](how-to-maintain-affinity-between-group-of-subscriptions-and-mailbox-server.md#bk_howdoimaintain). Vous pouvez ensuite utiliser la même connexion pour récupérer des événements pour l’ensemble du groupe, ce qui réduit le nombre de connexions requises.</li><li>  Modification de la valeur de limite hangingconnectionlimit dans le fichier Web. config pour Exchange sur site pour remplacer la valeur par défaut de trois connexions ouvertes. Exchange Online a un limite hangingconnectionlimit par défaut de 10, qui n’est pas configurable.</li></ul> |
|**ErrorExceededSubscriptionCount** |Créez un trop grand nombre d’abonnements. Le paramètre de stratégie de limitation [EwsMaxSubscriptions](https://msdn.microsoft.com/library/microsoft.exchange.data.directory.systemconfiguration.throttlingpolicy.ewsmaxsubscriptions%28v=exchg.150%29.aspx) détermine le nombre maximal d’abonnements pouvant être créés par un compte. | <ul><li>Utilisation de l' [emprunt d’identité](https://technet.microsoft.com/library/dd776119%28v=exchg.150%29.aspx) pour [créer des abonnements](how-to-maintain-affinity-between-group-of-subscriptions-and-mailbox-server.md#bk_throttling).</li><li>Réduction du nombre d’abonnements.</li></ul> |
|**ErrorInvalidSubscriptionRequest** |Créer des abonnements pour plusieurs boîtes aux lettres ou plusieurs dossiers à partir d’une seule demande.  |Création d’un abonnement pour un seul dossier public ou une seule boîte aux lettres dans une seule demande.|
|**ErrorInvalidWatermark** |Obtenir des événements à l’aide d’un filigrane non valide.| <ul><li>Vérification de l’ID d’abonnement renvoyé dans une réponse précédente.</li><li>S’assurer que vous envoyez l’ID d’abonnement pour l’objet **ExchangeService** correct.</li><li>[Création d’un abonnement](handling-notification-related-errors-in-ews-in-exchange.md#bk_recover).</li></ul> |
|**ErrorMissedNotificationEvents** |Obtenir des événements lorsque certains événements précédents ont été manqués.   |La comparaison des propriétés de dossier étendues **PR_LOCAL_COMMIT_TIME_MAX** (0x670a) et **PR_DELETED_COUNT_TOTAL** (0x670b) pour déterminer les modifications qui ont été manquées et la [création d’un nouvel abonnement](handling-notification-related-errors-in-ews-in-exchange.md#bk_recover).  |
|**ErrorProxyRequestNotAllowed** |S’abonner à des événements pour un utilisateur dans une demande groupée dont la boîte aux lettres a été déplacée vers un autre site.   |Utilisation de la [découverte automatique](autodiscover-for-exchange.md) pour redécouvrir ExternalEwsUrl ou EwsPartnerUrl et création d’un abonnement.  |
|**ErrorReadEventsFailed** |Obtenir des événements à partir d’un abonnement introuvable.  |Utilisation de la [découverte automatique](autodiscover-for-exchange.md) pour redécouvrir ExternalEwsUrl ou EwsPartnerUrl et création d’un abonnement.  |
|**ErrorServerBusy** | Dépasser les limites de [limitation](ews-throttling-in-exchange.md#throttling-considerations-for-ews-notification-applications) . Tenez compte des éléments suivants concernant la limitation :<ul><li>La limite de limitation [EwsMaxSubscriptions](https://msdn.microsoft.com/library/microsoft.exchange.data.directory.systemconfiguration.throttlingpolicy.ewsmaxsubscriptions%28v=exchg.150%29.aspx) identifie le nombre maximal d’abonnements de notification par émission, d’extraction ou de diffusion en continu pouvant être actifs en même temps. Il s’agit de la valeur des abonnements aux boîtes aux lettres, pas du nombre d’abonnements aux dossiers individuels dans un abonnement de boîte aux lettres. À partir des versions de boîte aux lettres de service 14.16.0135 et 14.15.0057.000, une boîte aux lettres hébergée par Exchange Online ou Exchange Online dans le cadre d’Office 365 peut avoir jusqu’à 20 abonnements et une boîte aux lettres Exchange 2013 locale peut avoir jusqu’à 5000 abonnements.</li><li>La limite de limitation [EwsMaxConcurrency](https://msdn.microsoft.com/library/microsoft.exchange.data.directory.systemconfiguration.throttlingpolicy.ewsmaxconcurrency%28v=exchg.150%29.aspx) identifie le nombre maximal de demandes actives pour les connexions de non-diffusion et a une valeur par défaut de 27.</li><li>La limite par défaut pour les connexions de diffusion en continu est de 10.</li></ul> |<ul><li>[Prendre en compte les implications des stratégies de limitation relatives aux notifications](ews-throttling-in-exchange.md#throttling-considerations-for-ews-notification-applications) et limiter le nombre d’abonnements actifs et de connexions actives de sorte que l’application ne soit pas limitée.</li><li>Utilisation d’un nombre réduit de connexions pour obtenir des événements. Maximisez le nombre d’abonnements dans chaque connexion en [plaçant un nombre maximal de 200 ID d’abonnement dans le même groupe](how-to-maintain-affinity-between-group-of-subscriptions-and-mailbox-server.md). Vous pouvez ensuite utiliser la même connexion pour récupérer des événements pour l’ensemble du groupe, ce qui réduit le nombre de connexions requises.</li><li>Modification de la valeur de limite hangingconnectionlimit dans le fichier Web. config pour remplacer la valeur par défaut de dix connexions de diffusion en continu ouvertes.</li></ul>|
|**ErrorSubscriptionNotFound** |Obtenir les événements d’un abonnement introuvable. L’abonnement a peut-être expiré, le processus EWS a peut-être été redémarré ou un abonnement non valide a été passé. | <ul><li>Vérification que vous utilisez le même ID d’abonnement qui a été renvoyé dans une réponse précédente.</li><li>S’assurer que vous envoyez l’ID d’abonnement pour l’objet **ExchangeService** correct.</li><li> [Création d’un abonnement](handling-notification-related-errors-in-ews-in-exchange.md#bk_recover).</li></ul> |
|**[ServiceLocalException](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.serviceresponseexception%28v=exchg.80%29.aspx)** |Ajouter un abonnement à un nouveau dossier lorsqu’une connexion d’abonnement est ouverte dans un autre dossier.  |Modification de votre abonnement pour vous abonner à tous les dossiers de la boîte aux lettres, au lieu d’un dossier spécifique.  |
|**[ServiceResponseException](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.serviceresponseexception%28v=exchg.80%29.aspx)** |Obtenir des événements pour un abonnement qui ne peut pas se trouver dans la Banque d’Exchange.  | <ul><li>Vérification que vous utilisez le même ID d’abonnement qui a été renvoyé dans une réponse précédente.</li><li>S’assurer que vous envoyez l’ID d’abonnement pour l’objet **ExchangeService** correct.</li></ul> |

## <a name="recovering-from-lost-subscriptions"></a>Récupérez des abonnements perdus
<a name="bk_recover"> </a>

Lorsqu’un abonnement est perdu ou n’est plus accessible, il est préférable de créer un nouvel abonnement et de ne pas inclure l’ancien filigrane dans le nouvel abonnement. Resubscribing avec l’ancien filigrane provoque une analyse linéaire des événements, ce qui est onéreux. Créez plutôt un nouvel abonnement et comparez les propriétés du dossier pour rechercher les modifications de contenu survenues entre l’abonnement perdu et le nouvel abonnement. Les propriétés du dossier étendu que nous vous recommandons de vérifier sont **PR_LOCAL_COMMIT_TIME_MAX** (0x670a0040) et **PR_DELETED_COUNT_TOTAL** (0x670b0003). Pour ce faire, vous pouvez [créer une définition de propriété étendue](properties-and-extended-properties-in-ews-in-exchange.md).

## <a name="see-also"></a>Voir aussi

- [Abonnements à des notifications, événements de boîte aux lettres et EWS dans Exchange](notification-subscriptions-mailbox-events-and-ews-in-exchange.md)
- [Notifications de flux concernant les événements de boîte aux lettres à l'aide de EWS dans Exchange](how-to-stream-notifications-about-mailbox-events-by-using-ews-in-exchange.md)
- [Notifications de type pull concernant les événements de boîte aux lettres à l'aide de EWS dans Exchange](how-to-pull-notifications-about-mailbox-events-by-using-ews-in-exchange.md)
- [Conserver l’affinité entre un groupe d'abonnements et le serveur de boîtes aux lettres dans Exchange](how-to-maintain-affinity-between-group-of-subscriptions-and-mailbox-server.md)


