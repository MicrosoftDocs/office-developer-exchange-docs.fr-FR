---
title: Enregistreur Exchange dans Exchange 2013
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
ms.topic: overview
ms.prod: office-online-server
localization_priority: Normal
ms.assetid: ec126433-9f0a-46ec-a685-ff4af2f97bc1
description: Trouvez des informations sur l’auteur du message Exchange dans Exchange 2013 pour la sauvegarde et de restauration des opérations.
ms.openlocfilehash: a4dc5963ab24a83969efc6e425b38a35276f3aa3
ms.sourcegitcommit: 34041125dc8c5f993b21cebfc4f8b72f0fd2cb6f
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/25/2018
ms.locfileid: "19754742"
---
# <a name="exchange-writer-in-exchange-2013"></a><span data-ttu-id="7c7fd-103">Enregistreur Exchange dans Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="7c7fd-103">Exchange writer in Exchange 2013</span></span>

<span data-ttu-id="7c7fd-104">Trouvez des informations sur l’auteur du message Exchange dans Exchange 2013 pour la sauvegarde et de restauration des opérations.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-104">Find information about the Exchange writer in Exchange 2013 for backup and restore operations.</span></span> 
  
<span data-ttu-id="7c7fd-105">**S’applique à :** Exchange Server 2013</span><span class="sxs-lookup"><span data-stu-id="7c7fd-105">**Applies to:** Exchange Server 2013</span></span> 
  
<span data-ttu-id="7c7fd-106">Le rédacteur Exchange est chargé de la sauvegarde et la restauration de bases de données actives Exchange Server 2013.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-106">The Exchange writer is responsible for the backup and restore of active Exchange Server 2013 databases.</span></span> <span data-ttu-id="7c7fd-107">Le rédacteur Exchange prend également en charge la fonctionnalité de sauvegarde pour une base de données sélectionné où le cliché par rapport à l’instance de la base de données et des transactions répliquée fichiers journaux.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-107">The Exchange writer also supports backup functionality for a selected database where the shadow copy is taken against the replicated instance of the database and transaction log files.</span></span> 
  
## <a name="overview-of-the-exchange-writer"></a><span data-ttu-id="7c7fd-108">Vue d’ensemble de l’enregistreur Exchange</span><span class="sxs-lookup"><span data-stu-id="7c7fd-108">Overview of the Exchange writer</span></span>
<span data-ttu-id="7c7fd-109"><a name="bk_Overview"> </a></span><span class="sxs-lookup"><span data-stu-id="7c7fd-109"></span></span>

<span data-ttu-id="7c7fd-110">Exchange 2013 inclut des fonctionnalités de mobilité de base de données, qui permettent de bases de données doivent être répliquées entre les différents serveurs Exchange pour améliorer la disponibilité de base de données et la résilience de site.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-110">Exchange 2013 includes database mobility features, which enable databases to be replicated among different Exchange servers to improve database availability and site resilience.</span></span> <span data-ttu-id="7c7fd-111">Les autres copies de base de données dans un groupe de disponibilité de base de données (DAG) offrent une opportunité précieuse pour les sauvegardes Exchange à utiliser les ressources supplémentaires qui sont disponibles à l’emplacement de copie.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-111">The other database copies in a Database Availability Group (DAG) provide a valuable opportunity for Exchange backups to use the extra resources that are available at the copy location.</span></span> <span data-ttu-id="7c7fd-112">En outre, étant donné que la copie au lieu de la base de données active master est sauvegardée, la copie peut être indisponible pendant la sauvegarde pour une période plus longue.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-112">In addition, because the copy instead of the active database master is backed up, the copy can be unavailable during the backup for a longer period of time.</span></span> 
  
<span data-ttu-id="7c7fd-113">Le rédacteur Exchange coordonnées avec les services Exchange (en fonctionnement au nom du demandeur) pour préparer les fichiers de base de données pour les sauvegardes, Figer l’activité d’e/s résultant de Exchange transactions avant la sauvegarde de la base de données, puis libérer et tronquer les fichiers journaux une fois la sauvegarde terminée.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-113">The Exchange writer coordinates with the Exchange services (operating on behalf of the requester) to prepare the database files for backups, freeze the IO activity resulting from Exchange transactions before backing up the database, and then unfreeze and truncate log files after the backup is complete.</span></span>
  
<span data-ttu-id="7c7fd-114">Lors d’une restauration, votre application de sauvegarde et de restauration indique à l’auteur du message change pour coordonner avec la banque d’informations Exchange (en fonctionnement au nom du demandeur) pour vérifier les cibles de restauration, renommez le fichier de base de données si nécessaire, puis réexécuter la transaction journaux selon vos besoins.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-114">During a restore, your backup and restore application instructs the Exchange writer to coordinate with the Exchange store (operating on behalf of the requester) to verify the restore targets, rename the database file if necessary, and then replay the transaction logs as needed.</span></span> <span data-ttu-id="7c7fd-115">Le rédacteur Exchange prend en charge les sauvegardes et restaurations.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-115">The Exchange writer supports both backups and restores.</span></span>
  
<span data-ttu-id="7c7fd-116">Le rédacteur Exchange est disponible sur tout serveur Exchange qui a le rôle serveur de boîtes aux lettres.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-116">The Exchange writer is available on any Exchange server that has the Mailbox server role installed.</span></span> 
  
## <a name="exchange-writer-configuration-settings"></a><span data-ttu-id="7c7fd-117">Paramètres de configuration Exchange writer</span><span class="sxs-lookup"><span data-stu-id="7c7fd-117">Exchange writer configuration settings</span></span>
<span data-ttu-id="7c7fd-118"><a name="bk_ExchangeWriterConfig"> </a></span><span class="sxs-lookup"><span data-stu-id="7c7fd-118"></span></span>

<span data-ttu-id="7c7fd-119">Le rédacteur Exchange pour VSS utilise une variété de paramètres et les valeurs qui doivent être correctement et conservés pendant les opérations de sauvegarde et de restauration.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-119">The Exchange writer for VSS uses a variety of settings and values that must be set correctly and preserved during backup and restore operations.</span></span> <span data-ttu-id="7c7fd-120">Ces paramètres de configuration sont stockés dans le document de métadonnées du rédacteur Exchange.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-120">These configuration settings are stored in the Exchange writer metadata document.</span></span> <span data-ttu-id="7c7fd-121">Si votre application de sauvegarde ne conserve pas ces paramètres, vous pouvez rencontrer des erreurs inattendues lorsque vous essayez de sauvegarder vos bases de données Exchange.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-121">If your backup application does not preserve these settings, you might experience unexpected errors when you attempt to back up your Exchange databases.</span></span> 
  
<span data-ttu-id="7c7fd-122">Le tableau suivant répertorie les interfaces VSS qui exposent des métadonnées sur les composants de sauvegarde de votre base de données.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-122">The following table lists the VSS interfaces that expose metadata about the components of your database backup.</span></span> <span data-ttu-id="7c7fd-123">Ces interfaces sont nécessaires pour obtenir l’enregistreur Exchange document de métadonnées qui sert à effectuer une sauvegarde de la banque d’informations Exchange.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-123">These interfaces are required to get the Exchange writer metadata document that is used to perform a backup of the Exchange store.</span></span>
  
<span data-ttu-id="7c7fd-124">**Le tableau 1. Interfaces VSS**</span><span class="sxs-lookup"><span data-stu-id="7c7fd-124">**Table 1. VSS interfaces**</span></span>

|<span data-ttu-id="7c7fd-125">**Interface VSS**</span><span class="sxs-lookup"><span data-stu-id="7c7fd-125">**VSS interface**</span></span>|<span data-ttu-id="7c7fd-126">**Description**</span><span class="sxs-lookup"><span data-stu-id="7c7fd-126">**Description**</span></span>|
|:-----|:-----|
|<span data-ttu-id="7c7fd-127">IVssWMComponent</span><span class="sxs-lookup"><span data-stu-id="7c7fd-127">IVssWMComponent</span></span>  <br/> |<span data-ttu-id="7c7fd-128">Permet d’accéder aux informations sur le composant stockées dans l’enregistreur Exchange.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-128">Allows access to component information stored in the Exchange writer.</span></span>  <br/> |
|<span data-ttu-id="7c7fd-129">IVssExamineWriterMetadata</span><span class="sxs-lookup"><span data-stu-id="7c7fd-129">IVssExamineWriterMetadata</span></span>  <br/> |<span data-ttu-id="7c7fd-130">Permet à l’application de sauvegarde et restauration de la demande examiner les métadonnées du rédacteur Exchange.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-130">Allows the requesting backup and restore application to examine the metadata of the Exchange writer.</span></span> <span data-ttu-id="7c7fd-131">Le document de métadonnées du rédacteur Exchange contient des valeurs spécifiques de Exchange 2013 et paramètres de l’application de sauvegarde et de restauration émet requiert afin qu’il puisse spécifier correctement les composants appropriés pour la sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-131">The Exchange writer metadata document contains Exchange 2013-specific values and parameters that the requesting backup and restore application requires so that it can correctly specify the appropriate components for backup.</span></span>  <br/> |
|<span data-ttu-id="7c7fd-132">IVssComponent</span><span class="sxs-lookup"><span data-stu-id="7c7fd-132">IVssComponent</span></span>  <br/> |<span data-ttu-id="7c7fd-133">Contient des méthodes pour examiner et de modifier des informations sur les composants contenus dans le Document des composants de sauvegarde d’un demandeur.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-133">Contains methods for examining and modifying information about components contained in a requester's Backup Components Document.</span></span> <span data-ttu-id="7c7fd-134">Objets peuvent être obtenus uniquement pour les composants qui ont été explicitement ajoutés à ce document par la méthode [IVssBackupComponents::AddComponent](http://msdn.microsoft.com/en-us/library/windows/desktop/aa382646%28v=vs.85%29.aspx) .</span><span class="sxs-lookup"><span data-stu-id="7c7fd-134">Objects can only be obtained for those components that have been explicitly added to this document by the [IVssBackupComponents::AddComponent](http://msdn.microsoft.com/en-us/library/windows/desktop/aa382646%28v=vs.85%29.aspx) method.</span></span>  <br/> |
|<span data-ttu-id="7c7fd-135">IVssBackupComponents</span><span class="sxs-lookup"><span data-stu-id="7c7fd-135">IVssBackupComponents</span></span>  <br/> |<span data-ttu-id="7c7fd-136">Utilisée par l’application de sauvegarde et de restauration demande d’interroger l’enregistreur Exchange sur l’état du fichier et de sauvegarde et les opérations de restauration.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-136">Used by the requesting backup and restore application to poll the Exchange writer about file status and to run backup and restore operations.</span></span> <span data-ttu-id="7c7fd-137">La méthode [IVssBackupComponents::SetBackupState](http://msdn.microsoft.com/en-us/library/windows/desktop/aa382833%28v=vs.85%29.aspx) définit si l’opération de sauvegarde est une copie complète, incrémentielle, ou sauvegarde différentielle.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-137">The [IVssBackupComponents::SetBackupState ](http://msdn.microsoft.com/en-us/library/windows/desktop/aa382833%28v=vs.85%29.aspx) method defines whether the backup operation is a full, copy, incremental, or differential backup.</span></span> <span data-ttu-id="7c7fd-138">La méthode [IVssBackupComponents::AddRestoreSubcomponent](http://msdn.microsoft.com/en-us/library/windows/desktop/aa382649%28v=vs.85%29.aspx) définit les sous-composants d’une base de données Exchange 2013 qui peut être sélectionné pour une opération de restauration.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-138">The [IVssBackupComponents::AddRestoreSubcomponent](http://msdn.microsoft.com/en-us/library/windows/desktop/aa382649%28v=vs.85%29.aspx) method defines the subcomponents of an Exchange 2013 database that can be selected for a restore operation.</span></span>  <br/> |
   
<span data-ttu-id="7c7fd-139">Dans le système de fichiers Windows Server, une base de données Exchange 2013 est enregistrée comme un fichier de base de données unique avec une extension *.edb. Expose l’enregistreur Exchange le *.edb que le composant de base de données, tout en les journaux de transactions (*.log) et les fichiers de point de contrôle (*.chk) sont regroupés dans un seul composant, désigné en tant que composant du journal.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-139">Within the Windows Server file system, an Exchange 2013 database is stored as a single database file with an extension *.edb. The Exchange writer exposes the *.edb as the database component, while transaction logs (*.log) and checkpoint files (*.chk) are combined into a single component, referred to as the log component.</span></span> <span data-ttu-id="7c7fd-140">Pour plus d’informations sur les fichiers de base de données Exchange, consultez la rubrique [concepts de sauvegarde et de restauration pour Exchange 2013](backup-and-restore-concepts-for-exchange-2013.md).</span><span class="sxs-lookup"><span data-stu-id="7c7fd-140">For more information about Exchange database files, see [Backup and restore concepts for Exchange 2013](backup-and-restore-concepts-for-exchange-2013.md).</span></span>
  
## <a name="interactions-between-the-exchange-writer-vss-and-vss-requesters"></a><span data-ttu-id="7c7fd-141">Interactions entre l’enregistreur Exchange, VSS et VSS demandeurs</span><span class="sxs-lookup"><span data-stu-id="7c7fd-141">Interactions between the Exchange writer, VSS, and VSS requesters</span></span>
<span data-ttu-id="7c7fd-142"><a name="bk_interactions"> </a></span><span class="sxs-lookup"><span data-stu-id="7c7fd-142"></span></span>

<span data-ttu-id="7c7fd-143">L’interaction de haut niveau entre le service VSS, le rédacteur Exchange, et Exchange 2013 pendant les opérations de sauvegarde est comme suit :</span><span class="sxs-lookup"><span data-stu-id="7c7fd-143">The high-level interaction between the VSS, the Exchange writer, and Exchange 2013 during backup operations is as follows:</span></span>
  
1. <span data-ttu-id="7c7fd-144">Le programme de sauvegarde (ou agent) exécute une tâche planifiée.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-144">The backup program (or agent) runs a scheduled job.</span></span> 
    
2. <span data-ttu-id="7c7fd-145">Le demandeur VSS dans l’application de sauvegarde et restauration envoie une commande au service VSS visant à prendre un cliché instantané des bases de données Exchange 2013 sélectionnés.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-145">The VSS requester in the backup and restore application sends a command to VSS to take a shadow copy of the selected Exchange 2013 databases.</span></span> 
    
3. <span data-ttu-id="7c7fd-146">Service VSS communique avec l’enregistreur Exchange pour préparer une sauvegarde instantanée.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-146">VSS communicates with the Exchange writer to prepare for a snapshot backup.</span></span> <span data-ttu-id="7c7fd-147">Exchange 2013 interdit les actions d’administration sur les bases de données, vérifie les dépendances du volume et suspend toutes les opérations d’écriture pour l’instance sélectionnée des base de données et les fichiers journaux tout en autorisant l’accès en lecture seule.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-147">Exchange 2013 prohibits administrative actions against the databases, checks volume dependencies, and suspends all write operations to selected instance of the database and transaction log files while allowing read-only access.</span></span> 
    
4. <span data-ttu-id="7c7fd-148">Service VSS communique avec le fournisseur de stockage approprié pour créer un cliché instantané du volume de stockage qui contient les bases de données Exchange 2013.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-148">VSS communicates with the appropriate storage provider to create a shadow copy of the storage volume that contains the Exchange 2013 databases.</span></span> 
    
5. <span data-ttu-id="7c7fd-149">VSS libère Exchange 2013 pour les opérations ordinaires.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-149">VSS releases Exchange 2013 to resume ordinary operations.</span></span> 
    
6. <span data-ttu-id="7c7fd-150">Le demandeur VSS vérifie la cohérence de la sauvegarde avant que la sauvegarde a réussi de signalisation physique.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-150">The VSS requester verifies the physical consistency of the backup set prior to signaling that the backup was successful.</span></span> <span data-ttu-id="7c7fd-151">Exchange 2013 tronque les journaux de transactions (si la base de données fait partie d’un DAG, la troncation de journal est répliquée sur toutes les copies) et enregistre l’heure de la dernière sauvegarde pour la base de données.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-151">Exchange 2013 truncates the transaction logs (if the database is part of a DAG, log truncation is replicated among all the copies) and records the time of the last backup for the database.</span></span>
    
<span data-ttu-id="7c7fd-152">VSS sérialiser l’interaction des demandeurs avec l’enregistreur Exchange commençant par la méthode [OnPrepareBackup](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381571%28v=vs.85%29.aspx) et se terminant par la méthode [OnPostSnapshot](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381568%28v=vs.85%29.aspx) .</span><span class="sxs-lookup"><span data-stu-id="7c7fd-152">VSS serializes requesters' interaction with the Exchange writer starting with the [OnPrepareBackup](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381571%28v=vs.85%29.aspx) method and ending with the [OnPostSnapshot](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381568%28v=vs.85%29.aspx) method.</span></span> <span data-ttu-id="7c7fd-153">En règle générale, la majorité du temps de l’enregistreur Exchange travailler avec le cliché instantané se produit après la méthode **OnPostSnapshot** , une fois que la cohérence du cliché instantané est vérifiée avant l’achèvement des sauvegardes.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-153">Typically, the majority of time the Exchange writer spends working with the shadow copy occurs after the **OnPostSnapshot** method, when the consistency of the shadow copy is verified prior to completion of the backups.</span></span> <span data-ttu-id="7c7fd-154">Le rédacteur Exchange prend en charge les sauvegardes en parallèle entre **OnPostSnapshot** et [OnBackupComplete](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381557%28v=vs.85%29.aspx).</span><span class="sxs-lookup"><span data-stu-id="7c7fd-154">The Exchange writer supports parallel backups between **OnPostSnapshot** and [OnBackupComplete](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381557%28v=vs.85%29.aspx).</span></span>
  
<span data-ttu-id="7c7fd-155">Exchange 2013 n’autorise pas les sauvegardes simultanées de la même base de données.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-155">Exchange 2013 does not allow concurrent backups of the same database.</span></span> <span data-ttu-id="7c7fd-156">Qu’une seule opération de sauvegarde peut exécutée sur une base de données en même temps.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-156">Only one backup job can run against a given database at one time.</span></span> <span data-ttu-id="7c7fd-157">Lorsque la sauvegarde est en cours d’exécution, la banque d’informations Exchange place la base de données dans un état de la sauvegarde en cours.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-157">When the backup is running, the Exchange store puts the database in a backup-in-progress state.</span></span> <span data-ttu-id="7c7fd-158">Cet état en mémoire est désactivé soit à la fin du processus de sauvegarde ou lorsque le service est redémarré.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-158">This in-memory state is cleared either at the completion of the backup process or when the service is restarted.</span></span> <span data-ttu-id="7c7fd-159">L’état de la sauvegarde en cours en mémoire et les données associées sont perdues lorsque le service qui héberge l’enregistreur Exchange est redémarré lors du redémarrage du système d’exploitation, ou un cluster de basculement se produit.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-159">The in-memory backup-in-progress state and its associated data are lost when the service that hosts the Exchange writer is restarted, when the operating system is restarted, or when a cluster failover occurs.</span></span> <span data-ttu-id="7c7fd-160">Une de ces événements entraîne la sauvegarde échoue.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-160">Any of these events will cause the backup job to fail.</span></span>
  
<span data-ttu-id="7c7fd-161">Sauvegarde lancée fichier troncature de journal est déclenchée en fonction du type de sauvegarde à effectuer.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-161">Backup-initiated transaction log file truncation is triggered based on the type of backup to be performed.</span></span> <span data-ttu-id="7c7fd-162">Dans les configurations non DAG, le rédacteur Exchange tronque les fichiers journaux de transactions à l’issue de sauvegardes complètes ou incrémentielles réussies.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-162">In non-DAG configurations, the Exchange writer will truncate the transaction log files at the completion of successful full or incremental backups.</span></span> <span data-ttu-id="7c7fd-163">Dans DAG répliqués configurations, la troncation de journal sera retardée par le service de réplication jusqu'à ce que tous les fichiers journaux nécessaires ont été relus dans toutes les autres copies.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-163">In DAG replicated configurations, log truncation will be delayed by the replication service until all necessary log files are replayed into all other copies.</span></span> <span data-ttu-id="7c7fd-164">Le service de réplication supprimera sauvegardé les fichiers journaux à la fois actif et la copie de chemins des fichiers journaux une fois qu’il vérifie que les fichiers journaux ont bien été appliqués à la base de données de copie et deux bases de données active et le point de contrôle de copies de base de données a réussi. les fichiers journaux à supprimer.</span><span class="sxs-lookup"><span data-stu-id="7c7fd-164">The replication service will delete the backed up log files both from the active and the copy log file paths after it verifies that the log files have successfully been applied to the copy database and both active database and the database copies checkpoint has passed the log files to be deleted.</span></span>
  
## <a name="see-also"></a><span data-ttu-id="7c7fd-165">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="7c7fd-165">See also</span></span>

- [<span data-ttu-id="7c7fd-166">Les journaux de transactions et des fichiers de point de contrôle pour la sauvegarde et de restauration dans Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="7c7fd-166">Transaction logs and checkpoint files for backup and restore in Exchange 2013</span></span>](transaction-logs-and-checkpoint-files-for-backup-and-restore-in-exchange.md)
    
- [<span data-ttu-id="7c7fd-167">Concepts de sauvegarde et de restauration pour Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="7c7fd-167">Backup and restore concepts for Exchange 2013</span></span>](backup-and-restore-concepts-for-exchange-2013.md)
    

