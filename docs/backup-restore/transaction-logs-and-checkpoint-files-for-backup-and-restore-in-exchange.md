---
title: Journaux de transaction et fichiers de point de contrôle pour la sauvegarde et la restauration dans Exchange
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
ms.topic: overview
ms.prod: office-online-server
localization_priority: Normal
ms.assetid: 80e04b9f-87c7-4acf-89b1-aa66ffaf7e53
description: Trouvez des informations sur les journaux de transaction et les fichiers de point de contrôle et la façon dont ils sont utilisés pour sauvegarder et restaurer les données Exchange 2013.
ms.openlocfilehash: 5b01fc6924f82e76943795df877ae84b1fde087b
ms.sourcegitcommit: 88ec988f2bb67c1866d06b361615f3674a24e795
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/03/2020
ms.locfileid: "44456387"
---
# <a name="transaction-logs-and-checkpoint-files-for-backup-and-restore-in-exchange"></a><span data-ttu-id="6909f-103">Journaux de transaction et fichiers de point de contrôle pour la sauvegarde et la restauration dans Exchange</span><span class="sxs-lookup"><span data-stu-id="6909f-103">Transaction logs and checkpoint files for backup and restore in Exchange</span></span>

<span data-ttu-id="6909f-104">Trouvez des informations sur les journaux de transaction et les fichiers de point de contrôle et la façon dont ils sont utilisés pour sauvegarder et restaurer les données Exchange 2013.</span><span class="sxs-lookup"><span data-stu-id="6909f-104">Find information about transaction logs and checkpoint files and how they are used to back up and restore Exchange 2013 data.</span></span>
  
<span data-ttu-id="6909f-105">**S’applique à :** Exchange Server 2013</span><span class="sxs-lookup"><span data-stu-id="6909f-105">**Applies to:** Exchange Server 2013</span></span> 
  
<span data-ttu-id="6909f-106">Cet article explique comment Exchange Server 2013 utilise les journaux de transaction et les fichiers de point de contrôle pour éviter toute perte de données.</span><span class="sxs-lookup"><span data-stu-id="6909f-106">This article describes how Exchange Server 2013 uses transaction logs and checkpoint files to help prevent data loss.</span></span> <span data-ttu-id="6909f-107">Il est important de connaître ces informations lorsque vous développez des applications de sauvegarde et de restauration qui utilisent le service VSS (Volume Shadow Copy Service) dans les versions de Windows Server à partir de Windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="6909f-107">It is important to be aware of this information when you develop backup and restore applications that use the Volume Shadow Copy Service (VSS) in versions of Windows Server starting with Windows Server 2008.</span></span>
  
## <a name="transaction-logs-in-exchange-2013"></a><span data-ttu-id="6909f-108">Journaux de transactions dans Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="6909f-108">Transaction logs in Exchange 2013</span></span>

<span data-ttu-id="6909f-109">Exchange 2013 gère un seul ensemble de fichiers journaux de transactions pour chaque base de données.</span><span class="sxs-lookup"><span data-stu-id="6909f-109">Exchange 2013 maintains a single set of transaction log files for each database.</span></span> <span data-ttu-id="6909f-110">Une transaction est définie comme n’importe quelle opération qui modifie l’État ou le contenu de la base de données.</span><span class="sxs-lookup"><span data-stu-id="6909f-110">A transaction is defined as any operation that changes the state or contents of the database.</span></span> <span data-ttu-id="6909f-111">Les fichiers journaux des transactions d’une base de données individuelle enregistrent toutes les transactions effectuées sur la base de données.</span><span class="sxs-lookup"><span data-stu-id="6909f-111">The transaction log files for an individual database record all the transactions performed on the database.</span></span> <span data-ttu-id="6909f-112">Les enregistrements des transactions sont écrits dans les journaux des transactions avant d’être créés dans la base de données proprement dite, afin de s’assurer que toutes les transactions validées peuvent être récupérées en cas de défaillance de la base de données.</span><span class="sxs-lookup"><span data-stu-id="6909f-112">Records of the transactions are written to the transaction logs before they are made in the database itself, to ensure that all committed transactions can be recovered in the event of a database failure.</span></span> <span data-ttu-id="6909f-113">Les journaux de transaction de base de données Exchange 2013 sont stockés sur le disque avant la validation des transactions dans le fichier de base de données.</span><span class="sxs-lookup"><span data-stu-id="6909f-113">Exchange 2013 database transaction logs are stored on disk before the transactions are committed to the database file.</span></span> 
  
<span data-ttu-id="6909f-114">L’enregistrement des transactions avant la mise à jour de la base de données est appelé journalisation en écriture anticipée.</span><span class="sxs-lookup"><span data-stu-id="6909f-114">The recording of the transactions before the database is updated is called write-ahead logging.</span></span> <span data-ttu-id="6909f-115">Pour vous assurer que la base de données est correctement ramenée à l’état correct, Exchange 2013 écrit des données dans les fichiers de base de données à l’aide d’écritures et de points de contrôle basés sur la page.</span><span class="sxs-lookup"><span data-stu-id="6909f-115">To help ensure that the database is correctly brought back to the proper state, Exchange 2013 writes data into the database files by using page-based writes and checkpoints.</span></span> <span data-ttu-id="6909f-116">Pendant les opérations normales, la Banque d’données Exchange enregistre d’abord les modifications apportées à la base de données dans les journaux de transactions, puis apporte ces modifications sur une copie en mémoire de la base de données.</span><span class="sxs-lookup"><span data-stu-id="6909f-116">During regular operations, the Exchange store first records database changes in the transaction logs, and then makes those changes on an in-memory copy of the database.</span></span> <span data-ttu-id="6909f-117">Les journaux de transaction enregistrent le début et la fin de chaque transaction.</span><span class="sxs-lookup"><span data-stu-id="6909f-117">The transaction logs record the beginning and end of each transaction.</span></span> <span data-ttu-id="6909f-118">Cela garantit que des informations suffisantes sont disponibles pour annuler ou restaurer ultérieurement les opérations dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="6909f-118">This ensures that sufficient information is available to later undo or roll back operations in the database.</span></span>
  
<span data-ttu-id="6909f-119">Lors de la récupération d’erreurs dans le cas où le fichier de base de données sur le disque est endommagé, mais que les journaux de transactions sont intacts, votre application de restauration doit d’abord restaurer une copie correcte connue du fichier de base de données.</span><span class="sxs-lookup"><span data-stu-id="6909f-119">When recovering from errors in which the database file on disk is damaged, but the transaction logs are intact, your restore application must first restore a known good copy of the database file.</span></span>
  
<span data-ttu-id="6909f-120">La banque Exchange relit les transactions à partir des journaux de transactions sauvegardés précédemment, puis relit les transactions restantes des fichiers journaux de transactions sur disque.</span><span class="sxs-lookup"><span data-stu-id="6909f-120">The Exchange store replays the transactions from the previously backed up transaction logs, and then replays any remaining transactions from the on-disk transaction log files.</span></span> <span data-ttu-id="6909f-121">Notez que parfois, les transactions peuvent être perdues si le système échoue entre le moment où les transactions sont enregistrées dans les journaux de transactions et quand elles sont effectivement écrites dans les fichiers de base de données.</span><span class="sxs-lookup"><span data-stu-id="6909f-121">Note that sometimes transactions can be lost if the system fails between when the transactions are recorded in the transaction logs, and when they are actually written to the database files.</span></span> 
  
<span data-ttu-id="6909f-122">Régulièrement, la Banque d’Exchange vérifie l’image de base de données en mémoire, puis détermine les pages qui ont été modifiées.</span><span class="sxs-lookup"><span data-stu-id="6909f-122">Periodically, the Exchange store checks the in-memory database image, and then determines which pages have changed.</span></span> <span data-ttu-id="6909f-123">La banque Exchange combine les modifications en attente, puis écrit ces pages dans le fichier de base de données sur le disque.</span><span class="sxs-lookup"><span data-stu-id="6909f-123">The Exchange store combines the pending changes, and then writes those pages to the database file on disk.</span></span>
  
## <a name="checkpoint-files-in-exchange-2013"></a><span data-ttu-id="6909f-124">Fichiers de point de contrôle dans Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="6909f-124">Checkpoint files in Exchange 2013</span></span>

<span data-ttu-id="6909f-125">Un fichier de point de contrôle enregistre les transactions journalisées qui ont été écrites dans les fichiers de base de données sur le disque.</span><span class="sxs-lookup"><span data-stu-id="6909f-125">A checkpoint file records which logged transactions have been written to the on-disk database files.</span></span> <span data-ttu-id="6909f-126">Le point de contrôle est avancé lorsque toutes les pages de base de données qui ont été modifiées par des entrées dans les journaux de transactions sont correctement écrites sur le disque.</span><span class="sxs-lookup"><span data-stu-id="6909f-126">The checkpoint is advanced when all the database pages that have been modified by entries in the transaction logs are successfully written to disk.</span></span> <span data-ttu-id="6909f-127">Étant donné que le fichier de point de contrôle enregistre les transactions qui se trouvent déjà dans l’image de la base de données sur le disque, la banque Exchange n’a besoin que de relire les transactions survenues après le point de contrôle.</span><span class="sxs-lookup"><span data-stu-id="6909f-127">Because the checkpoint file records which transactions are already in the on-disk database image, the Exchange store only needs to replay transactions that occurred after the checkpoint.</span></span> <span data-ttu-id="6909f-128">En fonction de la période entre les sauvegardes, cela peut réduire considérablement le nombre de transactions qui doivent être lues dans la base de données en cas de défaillance du système.</span><span class="sxs-lookup"><span data-stu-id="6909f-128">Depending on the time period between backups, this can greatly decrease the number of transactions that must be replayed into the database if a system failure occurs.</span></span>
  
## <a name="see-also"></a><span data-ttu-id="6909f-129">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="6909f-129">See also</span></span>

- [<span data-ttu-id="6909f-130">Concepts de sauvegarde et de restauration pour Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="6909f-130">Backup and restore concepts for Exchange 2013</span></span>](backup-and-restore-concepts-for-exchange-2013.md)
- [<span data-ttu-id="6909f-131">Types d’opérations de sauvegarde pour Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="6909f-131">Types of backup operations for Exchange 2013</span></span>](types-of-backup-operations-for-exchange-2013.md)
- [<span data-ttu-id="6909f-132">Restauration des bases de données Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="6909f-132">Restoring Exchange 2013 databases</span></span>](restoring-exchange-2013-databases.md)
    

